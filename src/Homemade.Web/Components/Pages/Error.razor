@page "/Error"
@using System.Diagnostics

<PageTitle>Error - Homemade</PageTitle>

<div class="min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-4">
    <div class="max-w-md w-full bg-white rounded-lg shadow-lg p-8">

        @* Error Icon and Title *@
        <div class="text-center mb-6">
            <svg class="mx-auto h-16 w-16 text-error-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
            </svg>
            <h1 class="text-3xl font-bold text-neutral-900 mb-2">Something went wrong</h1>
            <p class="text-neutral-600">We encountered an unexpected error</p>
        </div>

        @* Error Message *@
        <div class="bg-error-50 border border-error-200 rounded-md p-4 mb-6">
            <p class="text-sm text-error-800 leading-relaxed">
                We're sorry, but an unexpected error occurred whilst processing your request.
                Our team has been notified and we're working to resolve the issue.
            </p>
        </div>

        @* Request ID (for support/debugging) *@
        @if (ShowRequestId)
        {
            <div class="bg-neutral-50 border border-neutral-200 rounded-md p-4 mb-6">
                <p class="text-xs font-medium text-neutral-700 mb-1">Request ID</p>
                <code class="text-xs text-neutral-600 font-mono break-all">@RequestId</code>
                <p class="text-xs text-neutral-500 mt-2">
                    Please reference this ID when contacting support.
                </p>
            </div>
        }

        @* Action Buttons *@
        <div class="space-y-3">
            <a href="/" class="block w-full text-center bg-primary-500 hover:bg-primary-600 text-white font-semibold py-2.5 px-4 rounded-md transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2">
                Return to Home
            </a>
            <button
                type="button"
                onclick="window.history.back()"
                class="block w-full text-center border border-neutral-300 bg-white hover:bg-neutral-50 text-neutral-700 font-semibold py-2.5 px-4 rounded-md transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:ring-offset-2">
                Go Back
            </button>
        </div>

        @* Help Text *@
        <div class="mt-6 text-center">
            <p class="text-xs text-neutral-500">
                If this problem persists, please <a href="/contact" class="text-primary-600 hover:text-primary-700 hover:underline">contact support</a>.
            </p>
        </div>
    </div>
</div>

@code {
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}